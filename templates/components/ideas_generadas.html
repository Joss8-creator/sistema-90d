<div class="ideas-generadas">
    <div class="ideas-header">
        <h2>[IDEA] Ideas Generadas</h2>
        <span class="ideas-badge">
            {{ cantidad_ideas }} ideas {{ contexto_texto }}
        </span>
    </div>

    <div class="ideas-grid">
        {% for idea in ideas %}
        <div class="idea-card idea-dificultad-{{ idea.dificultad }}">
            <div class="idea-header">
                <h3>{{ idea.nombre }}</h3>
                <span class="dificultad-badge badge-{{ idea.dificultad }}">
                    {{ idea.dificultad }}
                </span>
            </div>

            <p class="idea-descripcion">{{ idea.descripcion }}</p>

            <div class="idea-detalles">
                <div class="detalle-item">
                    <strong>$ Hipótesis:</strong>
                    <p>{{ idea.hipotesis }}</p>
                </div>

                <div class="detalle-item">
                    <strong>[M] Mercado:</strong>
                    <p>{{ idea.mercado_objetivo }}</p>
                </div>

                <div class="detalle-item">
                    <strong>[T] Tiempo estimado MVP:</strong>
                    <p>{{ idea.tiempo_estimado_mvp }}</p>
                </div>

                <div class="detalle-item">
                    <strong>[!] Por qué esta idea:</strong>
                    <p>{{ idea.razon_sugerencia }}</p>
                </div>
            </div>

            <div class="idea-acciones">
                <button hx-post="/proyectos/crear-desde-idea" 
                        hx-target="#modal-crear-proyecto" 
                        hx-vals='js:{"nombre": `{{ idea.nombre }}`, "descripcion": `{{ idea.descripcion }}`, "hipotesis": `{{ idea.hipotesis }}`, "mercado_objetivo": `{{ idea.mercado_objetivo }}`, "tiempo_mvp": `{{ idea.tiempo_estimado_mvp }}`}' 
                        class="btn-primary">
                    (+) Crear Proyecto
                </button>
                <button class="btn-secondary" onclick="copiarIdea(this)">
                    [CP] Copiar
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    function copiarIdea(button) {
        const card = button.closest('.idea-card');
        const nombre = card.querySelector('h3').textContent;
        const descripcion = card.querySelector('.idea-descripcion').textContent;
        const hipotesis = card.querySelectorAll('.detalle-item p')[0].textContent;

        const texto = `${nombre}\n\n${descripcion}\n\nHipótesis: ${hipotesis}`;

        navigator.clipboard.writeText(texto).then(() => {
            button.textContent = '[OK] Copiado';
            setTimeout(() => button.textContent = '[CP] Copiar', 2000);
        });
    }
</script>